<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<title data-react-helmet="true">CommutoSwap Technical Reference | Commuto</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://jimmyneutront.github.io/commuto-docs/docs/technical-reference/core-tec-ref"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="CommutoSwap Technical Reference | Commuto"><meta data-react-helmet="true" name="description" content="This document describes the structs, events and functions used by the CommutoSwap smart contract."><meta data-react-helmet="true" property="og:description" content="This document describes the structs, events and functions used by the CommutoSwap smart contract."><link data-react-helmet="true" rel="canonical" href="https://jimmyneutront.github.io/commuto-docs/docs/technical-reference/core-tec-ref"><link data-react-helmet="true" rel="alternate" href="https://jimmyneutront.github.io/commuto-docs/docs/technical-reference/core-tec-ref" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://jimmyneutront.github.io/commuto-docs/docs/technical-reference/core-tec-ref" hreflang="x-default"><link rel="stylesheet" href="/commuto-docs/assets/css/styles.81d2e89c.css">
<link rel="preload" href="/commuto-docs/assets/js/runtime~main.0e776eb1.js" as="script">
<link rel="preload" href="/commuto-docs/assets/js/main.f9642657.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/commuto-docs/"><b class="navbar__title">Commuto</b></a><a class="navbar__item navbar__link navbar__link--active" href="/commuto-docs/docs/what-is-commuto">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jimmyneutront/commuto-whitepaper/blob/main/commuto-whitepaper.txt" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Whitepaper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/jimmyneutront" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">☽</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">☼</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/commuto-docs/docs/what-is-commuto">What is Commuto?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/commuto-docs/docs/guides/dev-env">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/commuto-docs/docs/technical-reference/core-tec-ref">Technical Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/commuto-docs/docs/technical-reference/core-tec-ref">CommutoSwap Technical Reference</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>CommutoSwap Technical Reference</h1></header><p>This document describes the structs, events and functions used by the CommutoSwap smart contract.</p><h1>Structs</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="offer">Offer<a class="hash-link" href="#offer" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">struct Offer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool isCreated;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool isTaken;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address maker;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes interfaceId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address stablecoin;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 amountLowerBound;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 amountUpperBound;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 securityDepositAmount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SwapDirection direction;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes price;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes[] settlementMethods;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 protocolVersion;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This represents an offer within CommutoSwap.</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">isCreated</td><td align="left">bool</td><td align="left">Used internally to check for offer existence</td></tr><tr><td align="left">isTaken</td><td align="left">bool</td><td align="left">Used internally to check if offer is taken</td></tr><tr><td align="left">maker</td><td align="left">address</td><td align="left">The Ethereum address of the offer maker</td></tr><tr><td align="left">bytes</td><td align="left">interfaceId</td><td align="left">The maker&#x27;s Commuto interface id</td></tr><tr><td align="left">stablecoin</td><td align="left">address</td><td align="left">The address of the contract of the stablecoin to be swapped</td></tr><tr><td align="left">amountLowerBound</td><td align="left">uint256</td><td align="left">The minimum amount of stablecoin the maker is willing to buy/sell</td></tr><tr><td align="left">amountUpperBound</td><td align="left">uint256</td><td align="left">The maximum amount of stablecoin the maker is willing to buy/sell</td></tr><tr><td align="left">securityDepositAmount</td><td align="left">uint256</td><td align="left">The amount that the maker and taker must temporarily surrender as a security deposit</td></tr><tr><td align="left">direction</td><td align="left">SwapDirection</td><td align="left">An enum that determines whether the maker is offering to buy or sell stablecoin</td></tr><tr><td align="left">price</td><td align="left">bytes</td><td align="left">A UTF-8 byte array describing the price of the offer, in terms of (number of FIAT units) per 1 STBL</td></tr><tr><td align="left">settlementMethods</td><td align="left">bytes[]</td><td align="left">An array of supported settlement methods by which the maker is willing to send/receive payment</td></tr><tr><td align="left">protocolVersion</td><td align="left">uint256</td><td align="left">Indicates for which version of CommutoSwap this offer was created</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="swap">Swap<a class="hash-link" href="#swap" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">struct Swap {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool isCreated;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool requiresFill;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address maker;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes makerInterfaceId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address taker;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes takerInterfaceId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address stablecoin;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 amountLowerBound;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 amountUpperBound;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 securityDepositAmount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 takenSwapAmount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 serviceFeeAmount;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SwapDirection direction;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes price;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes settlementMethod;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 protocolVersion;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool isPaymentSent;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool isPaymentReceived;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool hasBuyerClosed;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool hasSellerClosed;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This represents a swap within CommutoSwap.</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">isCreated</td><td align="left">bool</td><td align="left">Copied from corresponding Offer struct</td></tr><tr><td align="left">requiresFill</td><td align="left">bool</td><td align="left">Used internally for maker-as-seller trades to check if maker has filled swap</td></tr><tr><td align="left">isTaken</td><td align="left">bool</td><td align="left">Copied from corresponding Offer struct</td></tr><tr><td align="left">maker</td><td align="left">address</td><td align="left">Copied from corresponding Offer struct</td></tr><tr><td align="left">bytes</td><td align="left">makerInterfaceId</td><td align="left">Copied from interfaceId field of corresponding Offer struct</td></tr><tr><td align="left">taker</td><td align="left">address</td><td align="left">The Ethereum address of the taker</td></tr><tr><td align="left">bytes</td><td align="left">takerInterfaceId</td><td align="left">The taker&#x27;s Commuto interface id</td></tr><tr><td align="left">stablecoin</td><td align="left">address</td><td align="left">Copied from corresponding Offer struct</td></tr><tr><td align="left">amountLowerBound</td><td align="left">uint256</td><td align="left">Copied from corresponding Offer struct</td></tr><tr><td align="left">amountUpperBound</td><td align="left">uint256</td><td align="left">Copied from corresponding Offer struct</td></tr><tr><td align="left">securityDepositAmount</td><td align="left">uint256</td><td align="left">Copied from corresponding Offer struct</td></tr><tr><td align="left">takenSwapAmount</td><td align="left">uint256</td><td align="left">The amount of stablecoin the taker has decided to buy/sell (note that amountLowerBound ≤ takenSwapAmout ≤ amountUpperBound)</td></tr><tr><td align="left">serviceFeeAmount</td><td align="left">uint256</td><td align="left">The amount to be paid to Commuto by both the maker and taker as a service fee</td></tr><tr><td align="left">direction</td><td align="left">SwapDirection</td><td align="left">Copied from corresponding Offer struct</td></tr><tr><td align="left">price</td><td align="left">bytes</td><td align="left">Copied from corresponding Offer struct</td></tr><tr><td align="left">settlementMethod</td><td align="left">bytes</td><td align="left">The settlement method by which the taker has decided to send/receive payment (note that settlementMethod must be in corresponding offer&#x27;s settlementMethods field)</td></tr><tr><td align="left">protocolVersion</td><td align="left">uint256</td><td align="left">Copied from corresponding Offer struct</td></tr><tr><td align="left">isPaymentSent</td><td align="left">bool</td><td align="left">Used internally to check whether the buyer has sent fiat payment</td></tr><tr><td align="left">isPaymentReceived</td><td align="left">bool</td><td align="left">Used internally to check whether the seller has received fiat payment</td></tr><tr><td align="left">hasBuyerClosed</td><td align="left">bool</td><td align="left">Used internally to track whether the buyer has closed the swap and received their purchased stablecoin plus their security deposit</td></tr><tr><td align="left">hasSellerClosed</td><td align="left">bool</td><td align="left">Used internally to track whether the seller has closed the swap and received their purchased stablecoin plus their security deposit</td></tr></tbody></table><h1>Events</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="offeropened">OfferOpened<a class="hash-link" href="#offeropened" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">OfferOpened(bytes16 offerID, bytes interfaceId)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Emitted when a new offer is opened.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="pricechanged">PriceChanged<a class="hash-link" href="#pricechanged" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">PriceChanged(bytes16 offerID)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Emitted when the price of an offer is changed.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="offercanceled">OfferCanceled<a class="hash-link" href="#offercanceled" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">OfferCanceled(bytes16 offerID)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Emitted when an offer is canceled.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="offertaken">OfferTaken<a class="hash-link" href="#offertaken" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">OfferTaken(bytes16 offerID, bytes takerInterfaceId)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Emitted when an offer is taken.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="swapfilled">SwapFilled<a class="hash-link" href="#swapfilled" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">SwapFilled(bytes16 swapID);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Emitted when a maker-as-seller swap is filled</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="paymentsent">PaymentSent<a class="hash-link" href="#paymentsent" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">PaymentSent(bytes16 swapID)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Emitted when the buyer indicates that they have sent payment.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="paymentreceived">PaymentReceived<a class="hash-link" href="#paymentreceived" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">PaymentReceived(bytes16 swapID)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Emitted when the seller indicates that they have received payment</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="buyerclosed">BuyerClosed<a class="hash-link" href="#buyerclosed" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">BuyerClosed(bytes16 swapID)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Emitted when the buyer closes their side of the swap.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="sellerclosed">SellerClosed<a class="hash-link" href="#sellerclosed" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">SellerClosed(bytes16 swapID)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Emitted when the seller closes their side of the swap.</p><h1>Read-Only Functions</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="get-supported-settlement-methods">Get Supported Settlement Methods<a class="hash-link" href="#get-supported-settlement-methods" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function getSupportedSettlementMethods() view public returns (bytes[] memory)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Returns a list of byte arrays uniquely identifying each supported settlement method.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="get-supported-stablecoins">Get Supported Stablecoins<a class="hash-link" href="#get-supported-stablecoins" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function getSupportedStablecoins() view public returns (address[] memory)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Returns a list containing the address of each supported stablecoin contract.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="get-offer">Get Offer<a class="hash-link" href="#get-offer" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function getOffer(bytes16 offerID) view public returns (Offer memory)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Returns an Offer struct with the specified id</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">offerID</td><td align="left">bytes16</td><td align="left">The id of the Offer to be returned</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="get-swap">Get Swap<a class="hash-link" href="#get-swap" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function getSwap(bytes16 swapID) view public returns (Swap memory)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Returns a Swap struct with the specified id</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">swapID</td><td align="left">bytes16</td><td align="left">The id of the Swap to be returned</td></tr></tbody></table><h1>State-Changing Functions</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="set-settlement-method-support">Set Settlement Method Support<a class="hash-link" href="#set-settlement-method-support" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function setSettlementMethodSupport(bytes calldata settlementMethod, bool support)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Adds or removes support for a specific settlement method. This function can only be called by the owner of the CommutoSwap contract (the Commuto governance contract.)</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">settlementMethod</td><td align="left">bytes</td><td align="left">The byte array uniquely identifying the settlement method in question</td></tr><tr><td align="left">support</td><td align="left">bool</td><td align="left">Indicates whether support for the settlement method in question is to be added or removed</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="set-stablecoin-support">Set Stablecoin Support<a class="hash-link" href="#set-stablecoin-support" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function setStablecoinSupport(address stablecoin, bool support)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Adds or removes support for a specific stablecoin. This function can only be called by the owner of the CommutoSwap contract (the Commuto governance contract.)</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">stablecoin</td><td align="left">address</td><td align="left">The address of the stablecoin contract in question</td></tr><tr><td align="left">support</td><td align="left">bool</td><td align="left">Indicates whether support for the stablecoin in question is to be added or removed</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="open-offer">Open Offer<a class="hash-link" href="#open-offer" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function openOffer(bytes16 offerID, Offer memory newOffer)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Opens a new offer to swap stablecoin for fiat.</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">offerID</td><td align="left">bytes16</td><td align="left">A type-4 UUID that uniquely identifyies the new offer</td></tr><tr><td align="left">newOffer</td><td align="left">Offer</td><td align="left">An Offer struct containing the specifics of the new offer</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="edit-offer">Edit Offer<a class="hash-link" href="#edit-offer" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function editOffer(bytes16 offerID, Offer memory editedOffer, bool editPrice, bool editSettlementMethods)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Edits the price and/or supported settlement methods of an open swap offer. This function can only be called by the maker of the offer in question.</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">offerID</td><td align="left">bytes16</td><td align="left">The id of the offer to be edited</td></tr><tr><td align="left">editedOffer</td><td align="left">Offer</td><td align="left">An Offer struct with the new price and/or settlement methods of the open offer</td></tr><tr><td align="left">editPrice</td><td align="left">boolean</td><td align="left">Indicates whether the price of editedOffer should replace the price of the open offer</td></tr><tr><td align="left">editSettlementMethods</td><td align="left">boolean</td><td align="left">Indicates whether the settlement methods of editedOffer should replace the settlement methods of the open offer</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="cancel-offer">Cancel Offer<a class="hash-link" href="#cancel-offer" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function cancelOffer(bytes16 offerID)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Cancels an open offer. This function can only be called by the maker of the offer in question.</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">offerID</td><td align="left">bytes16</td><td align="left">The id of the offer to be canceled</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="take-offer">Take Offer<a class="hash-link" href="#take-offer" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function takeOffer(bytes16 offerID, Swap memory newSwap)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Takes an open swap offer.</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">offerID</td><td align="left">bytes16</td><td align="left">The id of the offer to be taken</td></tr><tr><td align="left">newSwap</td><td align="left">Swap</td><td align="left">A Swap struct containing the specifics of the new swap</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="fill-swap">Fill Swap<a class="hash-link" href="#fill-swap" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function fillSwap(bytes16 swapID)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Fills a maker-as-seller swap by locking up takenSwapAmount of the maker&#x27;s STBL, to be sent to the buyer upon swap closure. This function can only be called by the maker of a seller swap.</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">swapID</td><td align="left">bytes16</td><td align="left">The id of the swap to be filled</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="report-payment-sent">Report Payment Sent<a class="hash-link" href="#report-payment-sent" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function reportPaymentSent(bytes16 swapID)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Used by the buyer to indicate that they have sent payment. This function can only be called by the buyer.</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">swapID</td><td align="left">bytes16</td><td align="left">The id of the swap for which payment has been sent</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="report-payment-received">Report Payment Received<a class="hash-link" href="#report-payment-received" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function reportPaymentReceived(bytes16 swapID)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Used by the seller to indicate that they have received payment. This function can only be called by the buyer.</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">swapID</td><td align="left">bytes16</td><td align="left">The id of the swap for which payment has been received</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="close-swap">Close Swap<a class="hash-link" href="#close-swap" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-solidity theme-code-block"><div class="codeBlockContent_wNvx solidity"><pre tabindex="0" class="prism-code language-solidity codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">function closeSwap(bytes16 swapID)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Used by the buyer to receive the stablecoin they just purchased and have their security deposit returned to them. Used by the seller to have their security deposit returned to them. This function can only be called by the buyer and seller.</p><table><thead><tr><th align="left">Name</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">swapID</td><td align="left">bytes16</td><td align="left">The id of the swap to be closed</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/technical-reference/core-tec-ref.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/commuto-docs/docs/guides/dev-env"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Set Up A Development Environment</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#offer" class="table-of-contents__link toc-highlight">Offer</a></li><li><a href="#swap" class="table-of-contents__link toc-highlight">Swap</a></li><li><a href="#offeropened" class="table-of-contents__link toc-highlight">OfferOpened</a></li><li><a href="#pricechanged" class="table-of-contents__link toc-highlight">PriceChanged</a></li><li><a href="#offercanceled" class="table-of-contents__link toc-highlight">OfferCanceled</a></li><li><a href="#offertaken" class="table-of-contents__link toc-highlight">OfferTaken</a></li><li><a href="#swapfilled" class="table-of-contents__link toc-highlight">SwapFilled</a></li><li><a href="#paymentsent" class="table-of-contents__link toc-highlight">PaymentSent</a></li><li><a href="#paymentreceived" class="table-of-contents__link toc-highlight">PaymentReceived</a></li><li><a href="#buyerclosed" class="table-of-contents__link toc-highlight">BuyerClosed</a></li><li><a href="#sellerclosed" class="table-of-contents__link toc-highlight">SellerClosed</a></li><li><a href="#get-supported-settlement-methods" class="table-of-contents__link toc-highlight">Get Supported Settlement Methods</a></li><li><a href="#get-supported-stablecoins" class="table-of-contents__link toc-highlight">Get Supported Stablecoins</a></li><li><a href="#get-offer" class="table-of-contents__link toc-highlight">Get Offer</a></li><li><a href="#get-swap" class="table-of-contents__link toc-highlight">Get Swap</a></li><li><a href="#set-settlement-method-support" class="table-of-contents__link toc-highlight">Set Settlement Method Support</a></li><li><a href="#set-stablecoin-support" class="table-of-contents__link toc-highlight">Set Stablecoin Support</a></li><li><a href="#open-offer" class="table-of-contents__link toc-highlight">Open Offer</a></li><li><a href="#edit-offer" class="table-of-contents__link toc-highlight">Edit Offer</a></li><li><a href="#cancel-offer" class="table-of-contents__link toc-highlight">Cancel Offer</a></li><li><a href="#take-offer" class="table-of-contents__link toc-highlight">Take Offer</a></li><li><a href="#fill-swap" class="table-of-contents__link toc-highlight">Fill Swap</a></li><li><a href="#report-payment-sent" class="table-of-contents__link toc-highlight">Report Payment Sent</a></li><li><a href="#report-payment-received" class="table-of-contents__link toc-highlight">Report Payment Received</a></li><li><a href="#close-swap" class="table-of-contents__link toc-highlight">Close Swap</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/commuto-docs/docs/what-is-commuto">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/jimmyneutront" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">2022 Commuto. Built with Docusaurus.</div></div></div></footer></div>
<script src="/commuto-docs/assets/js/runtime~main.0e776eb1.js"></script>
<script src="/commuto-docs/assets/js/main.f9642657.js"></script>
</body>
</html>