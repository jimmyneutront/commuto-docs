"use strict";(self.webpackChunkcommuto_docs=self.webpackChunkcommuto_docs||[]).push([[294],{3905:function(e,t,a){a.d(t,{Zo:function(){return s},kt:function(){return c}});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=r.createContext({}),d=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=d(e.components);return r.createElement(p.Provider,{value:t},e.children)},f={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,p=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),m=d(a),c=n,k=m["".concat(p,".").concat(c)]||m[c]||f[c]||l;return a?r.createElement(k,i(i({ref:t},s),{},{components:a})):r.createElement(k,i({ref:t},s))}));function c(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:n,i[1]=o;for(var d=2;d<l;d++)i[d]=a[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},478:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return o},contentTitle:function(){return p},metadata:function(){return d},toc:function(){return s},default:function(){return m}});var r=a(7462),n=a(3366),l=(a(7294),a(3905)),i=["components"],o={id:"core-tec-ref",title:"CommutoSwap Technical Reference"},p=void 0,d={unversionedId:"technical-reference/core-tec-ref",id:"technical-reference/core-tec-ref",title:"CommutoSwap Technical Reference",description:"This document describes the structs, events and functions used by the CommutoSwap smart contract.",source:"@site/docs/technical-reference/core-tec-ref.md",sourceDirName:"technical-reference",slug:"/technical-reference/core-tec-ref",permalink:"/docs/technical-reference/core-tec-ref",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/technical-reference/core-tec-ref.md",tags:[],version:"current",frontMatter:{id:"core-tec-ref",title:"CommutoSwap Technical Reference"},sidebar:"tutorialSidebar",previous:{title:"Set Up A Development Environment",permalink:"/docs/guides/dev-env"}},s=[{value:"Offer",id:"offer",children:[],level:2},{value:"Swap",id:"swap",children:[],level:2},{value:"OfferOpened",id:"offeropened",children:[],level:2},{value:"PriceChanged",id:"pricechanged",children:[],level:2},{value:"OfferCanceled",id:"offercanceled",children:[],level:2},{value:"OfferTaken",id:"offertaken",children:[],level:2},{value:"SwapFilled",id:"swapfilled",children:[],level:2},{value:"PaymentSent",id:"paymentsent",children:[],level:2},{value:"PaymentReceived",id:"paymentreceived",children:[],level:2},{value:"BuyerClosed",id:"buyerclosed",children:[],level:2},{value:"SellerClosed",id:"sellerclosed",children:[],level:2},{value:"Get Supported Settlement Methods",id:"get-supported-settlement-methods",children:[],level:2},{value:"Get Supported Stablecoins",id:"get-supported-stablecoins",children:[],level:2},{value:"Get Offer",id:"get-offer",children:[],level:2},{value:"Get Swap",id:"get-swap",children:[],level:2},{value:"Set Settlement Method Support",id:"set-settlement-method-support",children:[],level:2},{value:"Set Stablecoin Support",id:"set-stablecoin-support",children:[],level:2},{value:"Open Offer",id:"open-offer",children:[],level:2},{value:"Edit Offer",id:"edit-offer",children:[],level:2},{value:"Cancel Offer",id:"cancel-offer",children:[],level:2},{value:"Take Offer",id:"take-offer",children:[],level:2},{value:"Fill Swap",id:"fill-swap",children:[],level:2},{value:"Report Payment Sent",id:"report-payment-sent",children:[],level:2},{value:"Report Payment Received",id:"report-payment-received",children:[],level:2},{value:"Close Swap",id:"close-swap",children:[],level:2}],f={toc:s};function m(e){var t=e.components,a=(0,n.Z)(e,i);return(0,l.kt)("wrapper",(0,r.Z)({},f,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"This document describes the structs, events and functions used by the CommutoSwap smart contract."),(0,l.kt)("h1",{id:"structs"},"Structs"),(0,l.kt)("h2",{id:"offer"},"Offer"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"struct Offer {\n    bool isCreated;\n    bool isTaken;\n    address maker;\n    bytes interfaceId;\n    address stablecoin;\n    uint256 amountLowerBound;\n    uint256 amountUpperBound;\n    uint256 securityDepositAmount;\n    SwapDirection direction;\n    bytes price;\n    bytes[] settlementMethods;\n    uint256 protocolVersion;\n}\n")),(0,l.kt)("p",null,"This represents an offer within CommutoSwap."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"isCreated"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Used internally to check for offer existence")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"isTaken"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Used internally to check if offer is taken")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"maker"),(0,l.kt)("td",{parentName:"tr",align:"left"},"address"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The Ethereum address of the offer maker")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes"),(0,l.kt)("td",{parentName:"tr",align:"left"},"interfaceId"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The maker's Commuto interface id")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"stablecoin"),(0,l.kt)("td",{parentName:"tr",align:"left"},"address"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The address of the contract of the stablecoin to be swapped")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"amountLowerBound"),(0,l.kt)("td",{parentName:"tr",align:"left"},"uint256"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The minimum amount of stablecoin the maker is willing to buy/sell")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"amountUpperBound"),(0,l.kt)("td",{parentName:"tr",align:"left"},"uint256"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The maximum amount of stablecoin the maker is willing to buy/sell")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"securityDepositAmount"),(0,l.kt)("td",{parentName:"tr",align:"left"},"uint256"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The amount that the maker and taker must temporarily surrender as a security deposit")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"direction"),(0,l.kt)("td",{parentName:"tr",align:"left"},"SwapDirection"),(0,l.kt)("td",{parentName:"tr",align:"left"},"An enum that determines whether the maker is offering to buy or sell stablecoin")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"price"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes"),(0,l.kt)("td",{parentName:"tr",align:"left"},"A UTF-8 byte array describing the price of the offer, in terms of (number of FIAT units) per 1 STBL")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"settlementMethods"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes[]"),(0,l.kt)("td",{parentName:"tr",align:"left"},"An array of supported settlement methods by which the maker is willing to send/receive payment")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"protocolVersion"),(0,l.kt)("td",{parentName:"tr",align:"left"},"uint256"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Indicates for which version of CommutoSwap this offer was created")))),(0,l.kt)("h2",{id:"swap"},"Swap"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"struct Swap {\n    bool isCreated;\n    bool requiresFill;\n    address maker;\n    bytes makerInterfaceId;\n    address taker;\n    bytes takerInterfaceId;\n    address stablecoin;\n    uint256 amountLowerBound;\n    uint256 amountUpperBound;\n    uint256 securityDepositAmount;\n    uint256 takenSwapAmount;\n    uint256 serviceFeeAmount;\n    SwapDirection direction;\n    bytes price;\n    bytes settlementMethod;\n    uint256 protocolVersion;\n    bool isPaymentSent;\n    bool isPaymentReceived;\n    bool hasBuyerClosed;\n    bool hasSellerClosed;\n}\n")),(0,l.kt)("p",null,"This represents a swap within CommutoSwap."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"isCreated"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Copied from corresponding Offer struct")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"requiresFill"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Used internally for maker-as-seller trades to check if maker has filled swap")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"isTaken"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Copied from corresponding Offer struct")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"maker"),(0,l.kt)("td",{parentName:"tr",align:"left"},"address"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Copied from corresponding Offer struct")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes"),(0,l.kt)("td",{parentName:"tr",align:"left"},"makerInterfaceId"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Copied from interfaceId field of corresponding Offer struct")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"taker"),(0,l.kt)("td",{parentName:"tr",align:"left"},"address"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The Ethereum address of the taker")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes"),(0,l.kt)("td",{parentName:"tr",align:"left"},"takerInterfaceId"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The taker's Commuto interface id")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"stablecoin"),(0,l.kt)("td",{parentName:"tr",align:"left"},"address"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Copied from corresponding Offer struct")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"amountLowerBound"),(0,l.kt)("td",{parentName:"tr",align:"left"},"uint256"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Copied from corresponding Offer struct")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"amountUpperBound"),(0,l.kt)("td",{parentName:"tr",align:"left"},"uint256"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Copied from corresponding Offer struct")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"securityDepositAmount"),(0,l.kt)("td",{parentName:"tr",align:"left"},"uint256"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Copied from corresponding Offer struct")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"takenSwapAmount"),(0,l.kt)("td",{parentName:"tr",align:"left"},"uint256"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The amount of stablecoin the taker has decided to buy/sell (note that amountLowerBound \u2264 takenSwapAmout \u2264 amountUpperBound)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"serviceFeeAmount"),(0,l.kt)("td",{parentName:"tr",align:"left"},"uint256"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The amount to be paid to Commuto by both the maker and taker as a service fee")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"direction"),(0,l.kt)("td",{parentName:"tr",align:"left"},"SwapDirection"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Copied from corresponding Offer struct")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"price"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Copied from corresponding Offer struct")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"settlementMethod"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The settlement method by which the taker has decided to send/receive payment (note that settlementMethod must be in corresponding offer's settlementMethods field)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"protocolVersion"),(0,l.kt)("td",{parentName:"tr",align:"left"},"uint256"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Copied from corresponding Offer struct")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"isPaymentSent"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Used internally to check whether the buyer has sent fiat payment")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"isPaymentReceived"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Used internally to check whether the seller has received fiat payment")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"hasBuyerClosed"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Used internally to track whether the buyer has closed the swap and received their purchased stablecoin plus their security deposit")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"hasSellerClosed"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Used internally to track whether the seller has closed the swap and received their purchased stablecoin plus their security deposit")))),(0,l.kt)("h1",{id:"events"},"Events"),(0,l.kt)("h2",{id:"offeropened"},"OfferOpened"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"OfferOpened(bytes16 offerID, bytes interfaceId)\n")),(0,l.kt)("p",null,"Emitted when a new offer is opened."),(0,l.kt)("h2",{id:"pricechanged"},"PriceChanged"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"PriceChanged(bytes16 offerID)\n")),(0,l.kt)("p",null,"Emitted when the price of an offer is changed."),(0,l.kt)("h2",{id:"offercanceled"},"OfferCanceled"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"OfferCanceled(bytes16 offerID)\n")),(0,l.kt)("p",null,"Emitted when an offer is canceled."),(0,l.kt)("h2",{id:"offertaken"},"OfferTaken"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"OfferTaken(bytes16 offerID, bytes takerInterfaceId)\n")),(0,l.kt)("p",null,"Emitted when an offer is taken."),(0,l.kt)("h2",{id:"swapfilled"},"SwapFilled"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"SwapFilled(bytes16 swapID);\n")),(0,l.kt)("p",null,"Emitted when a maker-as-seller swap is filled"),(0,l.kt)("h2",{id:"paymentsent"},"PaymentSent"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"PaymentSent(bytes16 swapID)\n")),(0,l.kt)("p",null,"Emitted when the buyer indicates that they have sent payment."),(0,l.kt)("h2",{id:"paymentreceived"},"PaymentReceived"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"PaymentReceived(bytes16 swapID)\n")),(0,l.kt)("p",null,"Emitted when the seller indicates that they have received payment"),(0,l.kt)("h2",{id:"buyerclosed"},"BuyerClosed"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"BuyerClosed(bytes16 swapID)\n")),(0,l.kt)("p",null,"Emitted when the buyer closes their side of the swap."),(0,l.kt)("h2",{id:"sellerclosed"},"SellerClosed"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"SellerClosed(bytes16 swapID)\n")),(0,l.kt)("p",null,"Emitted when the seller closes their side of the swap."),(0,l.kt)("h1",{id:"read-only-functions"},"Read-Only Functions"),(0,l.kt)("h2",{id:"get-supported-settlement-methods"},"Get Supported Settlement Methods"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function getSupportedSettlementMethods() view public returns (bytes[] memory)\n")),(0,l.kt)("p",null,"Returns a list of byte arrays uniquely identifying each supported settlement method."),(0,l.kt)("h2",{id:"get-supported-stablecoins"},"Get Supported Stablecoins"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function getSupportedStablecoins() view public returns (address[] memory)\n")),(0,l.kt)("p",null,"Returns a list containing the address of each supported stablecoin contract."),(0,l.kt)("h2",{id:"get-offer"},"Get Offer"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function getOffer(bytes16 offerID) view public returns (Offer memory)\n")),(0,l.kt)("p",null,"Returns an Offer struct with the specified id"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"offerID"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes16"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The id of the Offer to be returned")))),(0,l.kt)("h2",{id:"get-swap"},"Get Swap"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function getSwap(bytes16 swapID) view public returns (Swap memory)\n")),(0,l.kt)("p",null,"Returns a Swap struct with the specified id"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"swapID"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes16"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The id of the Swap to be returned")))),(0,l.kt)("h1",{id:"state-changing-functions"},"State-Changing Functions"),(0,l.kt)("h2",{id:"set-settlement-method-support"},"Set Settlement Method Support"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function setSettlementMethodSupport(bytes calldata settlementMethod, bool support)\n")),(0,l.kt)("p",null,"Adds or removes support for a specific settlement method. This function can only be called by the owner of the CommutoSwap contract (the Commuto governance contract.)"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"settlementMethod"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The byte array uniquely identifying the settlement method in question")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"support"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Indicates whether support for the settlement method in question is to be added or removed")))),(0,l.kt)("h2",{id:"set-stablecoin-support"},"Set Stablecoin Support"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function setStablecoinSupport(address stablecoin, bool support)\n")),(0,l.kt)("p",null,"Adds or removes support for a specific stablecoin. This function can only be called by the owner of the CommutoSwap contract (the Commuto governance contract.)"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"stablecoin"),(0,l.kt)("td",{parentName:"tr",align:"left"},"address"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The address of the stablecoin contract in question")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"support"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bool"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Indicates whether support for the stablecoin in question is to be added or removed")))),(0,l.kt)("h2",{id:"open-offer"},"Open Offer"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function openOffer(bytes16 offerID, Offer memory newOffer)\n")),(0,l.kt)("p",null,"Opens a new offer to swap stablecoin for fiat."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"offerID"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes16"),(0,l.kt)("td",{parentName:"tr",align:"left"},"A type-4 UUID that uniquely identifyies the new offer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"newOffer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Offer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"An Offer struct containing the specifics of the new offer")))),(0,l.kt)("h2",{id:"edit-offer"},"Edit Offer"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function editOffer(bytes16 offerID, Offer memory editedOffer, bool editPrice, bool editSettlementMethods)\n")),(0,l.kt)("p",null,"Edits the price and/or supported settlement methods of an open swap offer. This function can only be called by the maker of the offer in question."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"offerID"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes16"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The id of the offer to be edited")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"editedOffer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Offer"),(0,l.kt)("td",{parentName:"tr",align:"left"},"An Offer struct with the new price and/or settlement methods of the open offer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"editPrice"),(0,l.kt)("td",{parentName:"tr",align:"left"},"boolean"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Indicates whether the price of editedOffer should replace the price of the open offer")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"editSettlementMethods"),(0,l.kt)("td",{parentName:"tr",align:"left"},"boolean"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Indicates whether the settlement methods of editedOffer should replace the settlement methods of the open offer")))),(0,l.kt)("h2",{id:"cancel-offer"},"Cancel Offer"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function cancelOffer(bytes16 offerID)\n")),(0,l.kt)("p",null,"Cancels an open offer. This function can only be called by the maker of the offer in question."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"offerID"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes16"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The id of the offer to be canceled")))),(0,l.kt)("h2",{id:"take-offer"},"Take Offer"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function takeOffer(bytes16 offerID, Swap memory newSwap)\n")),(0,l.kt)("p",null,"Takes an open swap offer."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"offerID"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes16"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The id of the offer to be taken")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"newSwap"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Swap"),(0,l.kt)("td",{parentName:"tr",align:"left"},"A Swap struct containing the specifics of the new swap")))),(0,l.kt)("h2",{id:"fill-swap"},"Fill Swap"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function fillSwap(bytes16 swapID)\n")),(0,l.kt)("p",null,"Fills a maker-as-seller swap by locking up takenSwapAmount of the maker's STBL, to be sent to the buyer upon swap closure. This function can only be called by the maker of a seller swap."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"swapID"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes16"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The id of the swap to be filled")))),(0,l.kt)("h2",{id:"report-payment-sent"},"Report Payment Sent"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function reportPaymentSent(bytes16 swapID)\n")),(0,l.kt)("p",null,"Used by the buyer to indicate that they have sent payment. This function can only be called by the buyer."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"swapID"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes16"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The id of the swap for which payment has been sent")))),(0,l.kt)("h2",{id:"report-payment-received"},"Report Payment Received"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function reportPaymentReceived(bytes16 swapID)\n")),(0,l.kt)("p",null,"Used by the seller to indicate that they have received payment. This function can only be called by the buyer."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"swapID"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes16"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The id of the swap for which payment has been received")))),(0,l.kt)("h2",{id:"close-swap"},"Close Swap"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-solidity"},"function closeSwap(bytes16 swapID)\n")),(0,l.kt)("p",null,"Used by the buyer to receive the stablecoin they just purchased and have their security deposit returned to them. Used by the seller to have their security deposit returned to them. This function can only be called by the buyer and seller."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"swapID"),(0,l.kt)("td",{parentName:"tr",align:"left"},"bytes16"),(0,l.kt)("td",{parentName:"tr",align:"left"},"The id of the swap to be closed")))))}m.isMDXComponent=!0}}]);